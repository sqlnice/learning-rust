use rand::Rng;
use std::{cmp::Ordering, io};
fn main() {
    // guess_number()
    // variables_and_mutability()
    // data_types()
    another_function(5)
}

// 2 çŒœæ•°å­—æ¸¸æˆ
fn guess_number() {
    println!("çŒœæ•°å­—æ¸¸æˆ!");

    let secret_number = rand::thread_rng().gen_range(1..=100);

    loop {
        println!("è¯·è¾“å…¥ä½ çŒœæµ‹çš„æ•°å­—");

        let mut guess = String::new();

        io::stdin().read_line(&mut guess).expect("è¯»å–é”™è¯¯");

        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(_) => continue,
        };

        println!("ä½ çŒœæµ‹çš„æ•°å­—æ˜¯ï¼š{guess}");

        match guess.cmp(&secret_number) {
            Ordering::Less => println!("å¤ªå°å•¦"),
            Ordering::Greater => println!("å¤ªå¤§å•¦"),
            Ordering::Equal => {
                println!("ä½ èµ¢å•¦");
                break;
            }
        }
    }
}

// 3 å¸¸è§ç¼–ç¨‹æ¦‚å¿µ
// 3.1 å˜é‡ä¸Žå¯å˜æ€§
fn variables_and_mutability() {
    // å¯å˜æ€§
    // é€šè¿‡ mut å…³é”®å­—ï¼Œä½¿å…¶å¯å˜
    let mut x = 5;
    println!("{x}");
    x = 6;
    println!("{x}");

    // å¸¸é‡
    // ä¸å¯ä»¥æ˜¯åªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼
    // å‘½åå…¨å¤§å†™åŠ ä¸‹åˆ’çº¿
    const THREE_HOUSE_IN_SECONDS: u32 = 60 * 60 * 3;

    // éšè—ï¼ˆShadowingï¼‰
    let x = 5;
    let x = x + 1;
    {
        let x = x * 2;
        println!("åœ¨å†…éƒ¨ä»£ç å—ä¸­xä¸º:{x}")
    }
    println!("åœ¨å¤–éƒ¨ä»£ç å—ä¸­xä¸º:{x}");

    let spaces = "      ";
    let spaces = spaces.len();
    println!("spacesçš„é•¿åº¦ä¸º:{spaces}");
}
// 3.2 æ•°æ®ç±»åž‹
fn data_types() {
    // æ ‡é‡ç±»åž‹ï¼ˆscalarï¼‰ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ æ•´å½¢ã€æµ®ç‚¹åž‹ã€å¸ƒå°”ç±»åž‹ã€å­—ç¬¦ç±»åž‹

    // - æ•´å½¢ æ— å°æ•°éƒ¨åˆ† é»˜è®¤ i32
    // - æµ®ç‚¹åž‹ f32 f64ï¼›é»˜è®¤ f64ï¼› æ‰€æœ‰æµ®ç‚¹åž‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ï¼›æµ®ç‚¹æ•°é‡‡ç”¨IEEE-754æ ‡å‡†
    let x = 2.0;
    let y: f32 = 3.0;
    println!("{x}{y}");
    // - æ•°å€¼è¿ç®— æ”¯æŒåŠ å‡ä¹˜é™¤å’Œå–ä½™ï¼›æ•´æ•°é™¤æ³•ä¼šå‘ä¸‹èˆå…¥åˆ°æœ€æŽ¥è¿‘çš„æ•´æ•°
    // - å­—ç¬¦ç±»åž‹
    // ä½¿ç”¨ '' å£°æ˜Ž char å­—é¢é‡ï¼›ä½¿ç”¨ "" å£°æ˜Žå­—ç¬¦ä¸²å­—é¢é‡ï¼›
    let c = 'z';
    let z: char = 'â„¤';
    let heart_eyed_cat = 'ðŸ˜»';

    // å¤åˆç±»åž‹ï¼ˆCompound typesï¼‰ å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»åž‹
    // - å…ƒç¥–ç±»åž‹ ä¸€æ—¦å£°æ˜Žï¼Œé•¿åº¦ä¸ä¼šå˜åŒ–
    let tup: (i32, f64, u8) = (500, 6.4, 1);
    // ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æž„
    let (x, y, z) = tup;
    println!("{x}{y}{z}");
    // ä½¿ç”¨ . ç›´æŽ¥è®¿é—®
    let five_hundred = tup.0;
    let six_point_four = tup.1;
    let one = tup.2;
    // - æ•°ç»„ç±»åž‹ æ¯ä¸ªå…ƒç´ å¿…é¡»ç›¸åŒï¼›é•¿åº¦å›ºå®š
    let months: [&str; 12] = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
    ];
    let a = [3; 5]; // ç”Ÿæˆ [3, 3, 3, 3, 3]
    let first = a[0]; // ä½¿ç”¨ç´¢å¼•è®¿é—®
}
// 3.3 å‡½æ•°
fn another_function(x: i32) {
    // å‚æ•°å¿…é¡»æŒ‡å®šç±»åž‹;æ„å‘³ç€ç¼–è¯‘å™¨å†ä¹Ÿä¸éœ€è¦ä½ åœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹æ³¨æ˜Žç±»åž‹æ¥æŒ‡å‡ºä½ çš„æ„å›¾ã€‚è€Œä¸”ï¼Œåœ¨çŸ¥é“å‡½æ•°éœ€è¦ä»€ä¹ˆç±»åž‹åŽï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿç»™å‡ºæ›´æœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯
    println!("{x}");

    // è¯­å¥å’Œè¡¨è¾¾å¼
    // Rust æ˜¯ä¸€é—¨åŸºäºŽè¡¨è¾¾å¼ï¼ˆexpression-basedï¼‰çš„è¯­è¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦ç†è§£çš„ï¼ˆä¸åŒäºŽå…¶ä»–è¯­è¨€ï¼‰é‡è¦åŒºåˆ«ã€‚
    // è¯­å¥ - æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›žå€¼çš„æŒ‡ä»¤
    let y = 6;
    // è¡¨è¾¾å¼ - è®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼ã€‚
    // 1.ä¸Šé¢ä¾‹å­ä¸­ 6 æ˜¯è¡¨è¾¾å¼ï¼Œæ„ä¸ºè¿”å›žä¸€ä¸ª 6
    // 2.å‡½æ•°è°ƒç”¨
    // 3.å®è°ƒç”¨
    // 4.ç”¨å¤§æ‹¬å·åˆ›å»ºçš„æ–°çš„å—ä½œç”¨åŸŸä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼š
    let y = {
        let x = 3;
        x + 1 // è¡¨è¾¾å¼çš„ç»“å°¾æ²¡æœ‰åˆ†å·
    };
    println!("The value of y is: {y}");

    // å…·æœ‰è¿”å›žå€¼çš„å‡½æ•°;éœ€è¦åœ¨ -> åŽå£°æ˜Žå®ƒçš„ç±»åž‹
    fn five() -> i32 {
        5
    }
    five();
}
